---
// Header with logo and theme toggle
---

<header class="fixed top-0 left-0 right-0 z-50 px-6 py-4 bg-white/20 dark:bg-neutral-950/20 backdrop-blur-2xl backdrop-saturate-200 border-b border-neutral-200/10 dark:border-neutral-800/10">
  <div class="max-w-6xl mx-auto flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-2 text-lg font-semibold">
      <img src={`${import.meta.env.BASE_URL}butler.svg`} alt="Jack The Butler" class="w-8 h-8 dark:invert transition-transform duration-500 ease-out hover:rotate-[360deg]" />
      <span class="hidden sm:inline">Jack The Butler</span>
    </a>

    <!-- Nav Items -->
    <div class="flex items-center gap-4">
      <!-- Deploy CTA -->
      <a
        href="/#deploy"
        class="hidden sm:inline-flex items-center px-4 py-2 bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:hover:bg-neutral-100 text-white dark:text-neutral-900 text-sm font-semibold rounded-full transition-colors"
      >
        Deploy Free
      </a>

      <!-- Theme Toggle -->
      <button
        id="theme-toggle"
        type="button"
        class="w-8 h-8 rounded-full bg-neutral-100 dark:bg-neutral-800 flex items-center justify-center hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors relative overflow-hidden cursor-pointer"
        aria-label="Toggle theme"
      >
      <!-- Sun icon (visible in dark mode) - filled for better visibility -->
      <svg id="sun-icon" class="w-6 h-6 text-yellow-500 absolute transition-all duration-300 ease-out opacity-0 dark:opacity-100 scale-50 dark:scale-100 rotate-90 dark:rotate-0" viewBox="0 0 24 24">
        <path fill="currentColor" fill-rule="evenodd" d="M13 3a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0zM6.343 4.929A1 1 0 0 0 4.93 6.343l1.414 1.414a1 1 0 0 0 1.414-1.414zm12.728 1.414a1 1 0 0 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 1.414 1.414zM12 7a5 5 0 1 0 0 10a5 5 0 0 0 0-10m-9 4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zm16 0a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zM7.757 17.657a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 1 0 1.414 1.414zm9.9-1.414a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414zM13 19a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0z" clip-rule="evenodd"/>
      </svg>
      <!-- Moon icon (visible in light mode) - filled for better visibility -->
      <svg id="moon-icon" class="w-5 h-5 text-indigo-400 absolute transition-all duration-300 ease-out opacity-100 dark:opacity-0 scale-100 dark:scale-50 rotate-0 dark:rotate-90" viewBox="0 0 24 24">
        <path fill="currentColor" d="M9.272 2.406a1 1 0 0 0-1.23-1.355C6.59 1.535 5.432 2.488 4.37 3.55a11.4 11.4 0 0 0 0 16.182c4.518 4.519 11.51 4.261 15.976-.205c1.062-1.062 2.014-2.22 2.498-3.673A1 1 0 0 0 21.55 14.6c-3.59 1.322-7.675.734-10.433-2.025C8.35 9.808 7.788 5.744 9.272 2.406"/>
      </svg>
    </button>
    </div>
  </div>
</header>

<script is:inline>
  document.getElementById('theme-toggle').addEventListener('click', function(e) {
    var isDark = document.documentElement.classList.contains('dark');
    var newTheme = isDark ? 'light' : 'dark';

    // Get button position for animation origin
    var rect = this.getBoundingClientRect();
    var x = rect.left + rect.width / 2;
    var y = rect.top + rect.height / 2;

    // Calculate the max radius needed to cover the screen
    var maxRadius = Math.hypot(
      Math.max(x, window.innerWidth - x),
      Math.max(y, window.innerHeight - y)
    );

    // Check for View Transitions API support
    if (document.startViewTransition) {
      document.documentElement.style.setProperty('--x', x + 'px');
      document.documentElement.style.setProperty('--y', y + 'px');
      document.documentElement.style.setProperty('--r', maxRadius + 'px');

      document.startViewTransition(function() {
        document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', newTheme);
      });
    } else {
      // Fallback for browsers without View Transitions
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', newTheme);
    }
  });
</script>
