---
// Partners / Integrations scrolling logos
const partners = [
  { name: 'OpenAI', logo: '/logos/openai.svg' },
  { name: 'Anthropic', logo: '/logos/anthropic.svg' },
  { name: 'WhatsApp', logo: '/logos/whatsapp.svg' },
  { name: 'Twilio', logo: '/logos/twilio.svg' },
  { name: 'Cloudbeds', logo: '/logos/cloudbeds.svg' },
  { name: 'Mews', logo: '/logos/mews.svg' },
  { name: 'Opera', logo: '/logos/opera.svg' },
  { name: 'Guesty', logo: '/logos/guesty.svg' },
  { name: 'Google', logo: '/logos/google.svg' },
  { name: 'Ollama', logo: '/logos/ollama.svg' },
]
---

<section class="py-12 overflow-hidden border-t border-neutral-200 dark:border-neutral-800">
  <div class="relative">
    <!-- Gradient fade left -->
    <div class="absolute left-0 top-0 bottom-0 w-24 bg-gradient-to-r from-white dark:from-neutral-950 to-transparent z-10 pointer-events-none"></div>
    <!-- Gradient fade right -->
    <div class="absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-white dark:from-neutral-950 to-transparent z-10 pointer-events-none"></div>

    <!-- Scrolling container -->
    <div id="partners-scroll" class="flex w-max">
      <!-- First set of logos -->
      <div id="partners-set" class="flex">
        {partners.map((partner) => (
          <div class="flex items-center justify-center gap-3 px-8 shrink-0">
            <img
              src={partner.logo}
              alt={partner.name}
              loading="lazy"
              class="h-8 w-auto opacity-70 dark:opacity-60 dark:invert grayscale hover:grayscale-0 hover:opacity-100 transition-all duration-300"
            />
            <span class="text-sm font-medium text-neutral-500 dark:text-neutral-400">{partner.name}</span>
          </div>
        ))}
      </div>
      <!-- Duplicate set for seamless loop -->
      <div class="flex">
        {partners.map((partner) => (
          <div class="flex items-center justify-center gap-3 px-8 shrink-0">
            <img
              src={partner.logo}
              alt={partner.name}
              loading="lazy"
              class="h-8 w-auto opacity-70 dark:opacity-60 dark:invert grayscale hover:grayscale-0 hover:opacity-100 transition-all duration-300"
            />
            <span class="text-sm font-medium text-neutral-500 dark:text-neutral-400">{partner.name}</span>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<script>
  // Calculate exact width and set animation with pixel values
  function initPartnersScroll() {
    const scrollContainer = document.getElementById('partners-scroll');
    const partnersSet = document.getElementById('partners-set');

    if (!scrollContainer || !partnersSet) return;

    const setWidth = partnersSet.offsetWidth;
    // Speed: pixels per second (consistent across all screen sizes)
    const speed = 50;
    const duration = setWidth / speed;

    scrollContainer.style.setProperty('--scroll-width', `-${setWidth}px`);
    scrollContainer.style.setProperty('--scroll-duration', `${duration}s`);
    scrollContainer.classList.add('animate-scroll');
  }

  // Run on load and resize
  initPartnersScroll();
  window.addEventListener('resize', initPartnersScroll);
</script>

<style>
  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(var(--scroll-width));
    }
  }

  .animate-scroll {
    animation: scroll var(--scroll-duration, 30s) linear infinite;
  }

  .animate-scroll:hover {
    animation-play-state: paused;
  }
</style>
